<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŠ—æˆ˜çŸ¥è¯†é—¯å…³ - é“­è®°å†å² ç¼…æ€€å…ˆçƒˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft YaHei', sans-serif;
        }
        
        :root {
            --primary-color: #8B0000;
            --secondary-color: #D4AF37;
            --light-color: #F5F5F5;
            --dark-color: #333;
            --success-color: #28a745;
        }
        
        body {
            background-color: #f8f9fa;
            color: var(--dark-color);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary-color), #A52A2A);
            color: white;
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
        }
        
        .logo h1 {
            font-size: 1.8rem;
            margin-left: 10px;
        }
        
        .logo-icon {
            font-size: 2rem;
        }
        
        .user-info {
            display: flex;
            align-items: center;
        }
        
        .user-score {
            background: rgba(255, 255, 255, 0.2);
            padding: 5px 15px;
            border-radius: 20px;
            margin-right: 15px;
        }
        
        .btn {
            display: inline-block;
            background: var(--secondary-color);
            color: var(--dark-color);
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            text-decoration: none;
        }
        
        .btn:hover {
            background: #c19b2c;
            transform: translateY(-2px);
        }
        
        .btn-primary {
            background: var(--primary-color);
            color: white;
        }
        
        .btn-primary:hover {
            background: #a52a2a;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 30px;
            margin: 30px 0;
        }
        
        .card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            padding: 25px;
            margin-bottom: 25px;
        }
        
        .card h2 {
            color: var(--primary-color);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light-color);
        }
        
        .welcome-section {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(rgba(139, 0, 0, 0.8), rgba(139, 0, 0, 0.9)), url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="%238B0000"/><path d="M50 10 L60 40 L90 40 L65 60 L75 90 L50 70 L25 90 L35 60 L10 40 L40 40 Z" fill="%23D4AF37"/></svg>');
            background-size: cover;
            color: white;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        
        .welcome-section h2 {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: white;
            border: none;
        }
        
        .welcome-section p {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto 25px;
        }
        
        .feature-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .feature-card {
            background: white;
            border-radius: 10px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
        }
        
        .feature-icon {
            font-size: 3rem;
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .quiz-section {
            display: none;
        }
        
        .question {
            font-size: 1.3rem;
            margin-bottom: 20px;
            font-weight: bold;
        }
        
        .options {
            display: grid;
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .option {
            padding: 15px;
            background: var(--light-color);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .option:hover {
            background: #e9ecef;
        }
        
        .option.selected {
            background: var(--primary-color);
            color: white;
        }
        
        .option.correct {
            background: var(--success-color);
            color: white;
        }
        
        .option.incorrect {
            background: #dc3545;
            color: white;
        }
        
        .quiz-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        
        .ranking-list {
            list-style: none;
        }
        
        .ranking-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid var(--light-color);
        }
        
        .ranking-item:first-child {
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .certificate {
            text-align: center;
            padding: 30px;
            background: linear-gradient(45deg, #f9f9f9, #fff);
            border: 10px solid var(--secondary-color);
            border-radius: 15px;
            margin: 20px 0;
        }
        
        .certificate h3 {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 20px;
        }
        
        .certificate p {
            font-size: 1.2rem;
            margin: 10px 0;
        }
        
        .user-name {
            font-size: 2rem;
            font-weight: bold;
            margin: 20px 0;
            color: var(--dark-color);
        }
        
        .video-section {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .video-card {
            background: var(--light-color);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .video-thumbnail {
            height: 160px;
            background: var(--dark-color);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3rem;
        }
        
        .video-info {
            padding: 15px;
        }
        
        .video-info h4 {
            margin-bottom: 10px;
        }
        
        .locked {
            position: relative;
        }
        
        .locked::after {
            content: "ğŸ”’";
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.5rem;
        }
        
        .progress-bar {
            height: 10px;
            background: var(--light-color);
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: var(--primary-color);
            width: 0%;
            transition: width 0.5s;
        }
        
        footer {
            background: var(--dark-color);
            color: white;
            text-align: center;
            padding: 20px 0;
            margin-top: 50px;
        }
        
        .tab-navigation {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--light-color);
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
        }
        
        .tab.active {
            border-bottom: 3px solid var(--primary-color);
            font-weight: bold;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            
            .user-info {
                margin-top: 15px;
            }
            
            .feature-cards {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">ğŸ‡¨ğŸ‡³</div>
                    <h1>æŠ—æˆ˜çŸ¥è¯†é—¯å…³</h1>
                </div>
                <div class="user-info">
                    <div class="user-score">ç§¯åˆ†: <span id="current-score">0</span></div>
                    <button class="btn" id="user-name-btn">æ¸¸å®¢</button>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="welcome-section">
            <h2>é“­è®°å†å² ç¼…æ€€å…ˆçƒˆ</h2>
            <p>é€šè¿‡çŸ¥è¯†é—¯å…³äº†è§£æŠ—æˆ˜å†å²ï¼Œä¼ æ‰¿çº¢è‰²åŸºå› ï¼Œå¼˜æ‰¬çˆ±å›½ä¸»ä¹‰ç²¾ç¥</p>
            <button class="btn btn-primary" id="start-quiz">å¼€å§‹é—¯å…³</button>
        </div>

        <div class="tab-navigation">
            <div class="tab active" data-tab="home">é¦–é¡µ</div>
            <div class="tab" data-tab="quiz">çŸ¥è¯†é—¯å…³</div>
            <div class="tab" data-tab="ranking">ç§¯åˆ†æ’å</div>
            <div class="tab" data-tab="certificate">ç”µå­è¯ä¹¦</div>
            <div class="tab" data-tab="videos">æŠ—æˆ˜è§†é¢‘</div>
        </div>

        <div class="tab-content active" id="home-tab">
            <div class="card">
                <h2>æ´»åŠ¨ä»‹ç»</h2>
                <p>æŠ—æ—¥æˆ˜äº‰æ˜¯ä¸­åæ°‘æ—å†å²ä¸Šæœ€ä¼Ÿå¤§çš„å«å›½æˆ˜äº‰ï¼Œæ˜¯ä¸­å›½äººæ°‘åæŠ—æ—¥æœ¬å¸å›½ä¸»ä¹‰ä¾µç•¥çš„æ­£ä¹‰æˆ˜äº‰ã€‚æœ¬æ¬¡çŸ¥è¯†é—¯å…³æ´»åŠ¨æ—¨åœ¨é€šè¿‡äº’åŠ¨é—®ç­”çš„å½¢å¼ï¼Œå¸®åŠ©å¤§å®¶äº†è§£æŠ—æˆ˜å†å²ï¼Œç¼…æ€€é©å‘½å…ˆçƒˆï¼Œä¼ æ‰¿çº¢è‰²åŸºå› ã€‚</p>
                <p>æ´»åŠ¨åŒ…å«å¤šä¸ªå…³å¡ï¼Œæ¯ä¸ªå…³å¡æœ‰5é“é¢˜ç›®ï¼Œç­”å¯¹å¯è·å¾—ç§¯åˆ†ã€‚ç§¯ç´¯ä¸€å®šç§¯åˆ†åå¯ä»¥è§£é”æŠ—æˆ˜ç›¸å…³çŸ­è§†é¢‘ï¼Œå¹¶è·å¾—ç”µå­è£èª‰è¯ä¹¦ã€‚</p>
            </div>

            <div class="feature-cards">
                <div class="feature-card">
                    <div class="feature-icon">â“</div>
                    <h3>çŸ¥è¯†é—¯å…³</h3>
                    <p>é€šè¿‡å›ç­”æŠ—æˆ˜å†å²ç›¸å…³é—®é¢˜ï¼Œæµ‹è¯•æ‚¨çš„å†å²çŸ¥è¯†æ°´å¹³</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">ğŸ†</div>
                    <h3>ç§¯åˆ†æ’å</h3>
                    <p>æŸ¥çœ‹æ‚¨çš„ç§¯åˆ†æ’åï¼Œä¸å…¶ä»–å‚ä¸è€…ä¸€è¾ƒé«˜ä¸‹</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">ğŸ“œ</div>
                    <h3>ç”µå­è¯ä¹¦</h3>
                    <p>å®ŒæˆæŒ‘æˆ˜åè·å¾—ä¸ªæ€§åŒ–ç”µå­è£èª‰è¯ä¹¦</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">ğŸ¬</div>
                    <h3>æŠ—æˆ˜è§†é¢‘</h3>
                    <p>è§£é”è§‚çœ‹çè´µå†å²å½±åƒèµ„æ–™å’Œçºªå½•ç‰‡</p>
                </div>
            </div>
        </div>

        <div class="tab-content" id="quiz-tab">
            <div class="card">
                <h2>æŠ—æˆ˜çŸ¥è¯†é—¯å…³</h2>
                <div class="progress-bar">
                    <div class="progress" id="quiz-progress"></div>
                </div>
                <div id="quiz-container">
                    <div class="question" id="question-text">é—®é¢˜åŠ è½½ä¸­...</div>
                    <div class="options" id="options-container">
                        <!-- é€‰é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                    <div class="quiz-navigation">
                        <button class="btn" id="prev-question">ä¸Šä¸€é¢˜</button>
                        <button class="btn btn-primary" id="next-question">ä¸‹ä¸€é¢˜</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-content" id="ranking-tab">
            <div class="card">
                <h2>ç§¯åˆ†æ’å</h2>
                <ul class="ranking-list" id="ranking-list">
                    <!-- æ’åå°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </ul>
            </div>
        </div>

        <div class="tab-content" id="certificate-tab">
            <div class="card">
                <h2>ç”µå­è¯ä¹¦</h2>
                <div class="certificate">
                    <h3>æŠ—æˆ˜çŸ¥è¯†å­¦ä¹ è£èª‰è¯ä¹¦</h3>
                    <p>æˆäºˆ</p>
                    <div class="user-name" id="certificate-name">æ¸¸å®¢</div>
                    <p>åœ¨æŠ—æˆ˜çŸ¥è¯†é—¯å…³æ´»åŠ¨ä¸­è¡¨ç°ä¼˜å¼‚ï¼Œç´¯è®¡è·å¾—</p>
                    <div class="user-name" id="certificate-score">0</div>
                    <p>åˆ†ï¼Œç‰¹å‘æ­¤è¯ï¼Œä»¥èµ„é¼“åŠ±ã€‚</p>
                    <p id="certificate-date">2023å¹´XæœˆXæ—¥</p>
                    <button class="btn btn-primary" id="download-certificate" style="margin-top: 20px;">ä¸‹è½½è¯ä¹¦</button>
                </div>
            </div>
        </div>

        <div class="tab-content" id="videos-tab">
            <div class="card">
                <h2>æŠ—æˆ˜è§†é¢‘</h2>
                <p>ç§¯ç´¯ç§¯åˆ†è§£é”æ›´å¤šçè´µå†å²è§†é¢‘èµ„æ–™</p>
                <div class="video-section" id="video-container">
                    <!-- è§†é¢‘å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>æŠ—æˆ˜çŸ¥è¯†é—¯å…³ &copy; 2023 - é“­è®°å†å²ï¼Œç¼…æ€€å…ˆçƒˆï¼Œççˆ±å’Œå¹³</p>
        </div>
    </footer>

    <script>
        // æ¨¡æ‹Ÿæ•°æ®
        const quizData = [
            {
                question: "æŠ—æ—¥æˆ˜äº‰å…¨é¢çˆ†å‘çš„æ ‡å¿—æ˜¯ä»€ä¹ˆäº‹ä»¶ï¼Ÿ",
                options: [
                    "ä¹ä¸€å…«äº‹å˜",
                    "ä¸ƒä¸ƒäº‹å˜",
                    "ä¸€äºŒå…«äº‹å˜",
                    "è¥¿å®‰äº‹å˜"
                ],
                answer: 1
            },
            {
                question: "ä¸­å›½æŠ—æ—¥æˆ˜äº‰æŒç»­äº†å¤šå°‘å¹´ï¼Ÿ",
                options: [
                    "8å¹´",
                    "10å¹´",
                    "14å¹´",
                    "12å¹´"
                ],
                answer: 2
            },
            {
                question: "ä¸‹åˆ—å“ªåœºæˆ˜å½¹æ˜¯æŠ—æ—¥æˆ˜äº‰æœŸé—´ä¸­å›½å†›é˜Ÿå–å¾—çš„ç¬¬ä¸€æ¬¡é‡å¤§èƒœåˆ©ï¼Ÿ",
                options: [
                    "æ·æ²ªä¼šæˆ˜",
                    "å¹³å‹å…³å¤§æ·",
                    "å°å„¿åº„æˆ˜å½¹",
                    "ç™¾å›¢å¤§æˆ˜"
                ],
                answer: 1
            },
            {
                question: "æŠ—æ—¥æˆ˜äº‰èƒœåˆ©çºªå¿µæ—¥æ˜¯å“ªä¸€å¤©ï¼Ÿ",
                options: [
                    "8æœˆ15æ—¥",
                    "9æœˆ2æ—¥",
                    "9æœˆ3æ—¥",
                    "10æœˆ1æ—¥"
                ],
                answer: 2
            },
            {
                question: "æŠ—æ—¥æˆ˜äº‰æœŸé—´ï¼Œä¸­å›½æˆ˜åœºç‰µåˆ¶äº†æ—¥æœ¬é™†å†›æ€»å…µåŠ›çš„å¤šå°‘ï¼Ÿ",
                options: [
                    "çº¦30%",
                    "çº¦50%",
                    "çº¦70%",
                    "çº¦90%"
                ],
                answer: 2
            }
        ];

        const videosData = [
            { id: 1, title: "ä¸ƒä¸ƒäº‹å˜å†å²å½±åƒ", pointsRequired: 0, unlocked: true },
            { id: 2, title: "å¹³å‹å…³å¤§æ·çºªå½•ç‰‡", pointsRequired: 10, unlocked: false },
            { id: 3, title: "å°å„¿åº„æˆ˜å½¹å®å½•", pointsRequired: 20, unlocked: false },
            { id: 4, title: "ç™¾å›¢å¤§æˆ˜å†å²å›é¡¾", pointsRequired: 30, unlocked: false },
            { id: 5, title: "æŠ—æˆ˜èƒœåˆ©æ—¥çè´µå½±åƒ", pointsRequired: 50, unlocked: false }
        ];

        // ç”¨æˆ·æ•°æ®
        let userData = {
            name: "æ¸¸å®¢",
            score: 0,
            currentQuestion: 0,
            answers: [],
            videosUnlocked: [1]
        };

        // æ’åæ•°æ®
        let rankingData = [
            { name: "å¼ çˆ±å›½", score: 85 },
            { name: "æå«å›½", score: 76 },
            { name: "ç‹æŠ—æˆ˜", score: 70 },
            { name: "åˆ˜å†å²", score: 65 },
            { name: "é™ˆé“­è®°", score: 60 },
            { name: "æ¸¸å®¢", score: 0 }
        ];

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // ä»localStorageåŠ è½½æ•°æ®
            loadUserData();
            
            // è®¾ç½®æ ‡ç­¾é¡µåˆ‡æ¢
            setupTabs();
            
            // åˆå§‹åŒ–é—®ç­”ç³»ç»Ÿ
            initQuiz();
            
            // åˆå§‹åŒ–æ’å
            renderRanking();
            
            // åˆå§‹åŒ–è§†é¢‘
            renderVideos();
            
            // æ›´æ–°è¯ä¹¦
            updateCertificate();
            
            // äº‹ä»¶ç›‘å¬
            document.getElementById('start-quiz').addEventListener('click', function() {
                switchTab('quiz');
            });
            
            document.getElementById('user-name-btn').addEventListener('click', function() {
                const newName = prompt("è¯·è¾“å…¥æ‚¨çš„å§“å:", userData.name);
                if (newName && newName.trim() !== "") {
                    userData.name = newName.trim();
                    document.getElementById('user-name-btn').textContent = userData.name;
                    saveUserData();
                    updateCertificate();
                }
            });
            
            document.getElementById('download-certificate').addEventListener('click', function() {
                alert("è¯ä¹¦ä¸‹è½½åŠŸèƒ½éœ€è¦åç«¯æ”¯æŒï¼Œå½“å‰ä¸ºæ¼”ç¤ºç‰ˆæœ¬");
            });
        });

        // æ ‡ç­¾é¡µåˆ‡æ¢
        function setupTabs() {
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    switchTab(tabName);
                });
            });
        }

        function switchTab(tabName) {
            // ç§»é™¤æ‰€æœ‰activeç±»
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // æ·»åŠ activeç±»åˆ°å½“å‰æ ‡ç­¾
            document.querySelector(`.tab[data-tab="${tabName}"]`).classList.add('active');
            document.getElementById(`${tabName}-tab`).classList.add('active');
            
            // å¦‚æœæ˜¯é—®ç­”æ ‡ç­¾ï¼Œåˆå§‹åŒ–é—®ç­”
            if (tabName === 'quiz') {
                initQuiz();
            }
        }

        // åˆå§‹åŒ–é—®ç­”ç³»ç»Ÿ
        function initQuiz() {
            const questionElement = document.getElementById('question-text');
            const optionsElement = document.getElementById('options-container');
            const prevButton = document.getElementById('prev-question');
            const nextButton = document.getElementById('next-question');
            const progressElement = document.getElementById('quiz-progress');
            
            // æ˜¾ç¤ºå½“å‰é—®é¢˜
            function showQuestion() {
                const currentQuiz = quizData[userData.currentQuestion];
                questionElement.textContent = `ç¬¬${userData.currentQuestion + 1}é¢˜: ${currentQuiz.question}`;
                
                // æ›´æ–°è¿›åº¦æ¡
                progressElement.style.width = `${((userData.currentQuestion + 1) / quizData.length) * 100}%`;
                
                // æ¸…ç©ºé€‰é¡¹
                optionsElement.innerHTML = '';
                
                // æ·»åŠ é€‰é¡¹
                currentQuiz.options.forEach((option, index) => {
                    const optionElement = document.createElement('div');
                    optionElement.classList.add('option');
                    optionElement.textContent = option;
                    
                    // å¦‚æœå·²ç»å›ç­”è¿‡ï¼Œæ˜¾ç¤ºç»“æœ
                    if (userData.answers[userData.currentQuestion] !== undefined) {
                        if (index === currentQuiz.answer) {
                            optionElement.classList.add('correct');
                        } else if (index === userData.answers[userData.currentQuestion] && index !== currentQuiz.answer) {
                            optionElement.classList.add('incorrect');
                        }
                    }
                    
                    // å¦‚æœå½“å‰é€‰é¡¹æ˜¯ç”¨æˆ·çš„é€‰æ‹©
                    if (index === userData.answers[userData.currentQuestion]) {
                        optionElement.classList.add('selected');
                    }
                    
                    optionElement.addEventListener('click', function() {
                        if (userData.answers[userData.currentQuestion] === undefined) {
                            selectOption(index);
                        }
                    });
                    
                    optionsElement.appendChild(optionElement);
                });
                
                // æ›´æ–°æŒ‰é’®çŠ¶æ€
                prevButton.disabled = userData.currentQuestion === 0;
                nextButton.textContent = userData.currentQuestion === quizData.length - 1 ? "å®Œæˆ" : "ä¸‹ä¸€é¢˜";
            }
            
            // é€‰æ‹©é€‰é¡¹
            function selectOption(optionIndex) {
                // å¦‚æœå·²ç»å›ç­”è¿‡ï¼Œä¸èƒ½å†æ¬¡é€‰æ‹©
                if (userData.answers[userData.currentQuestion] !== undefined) {
                    return;
                }
                
                // è®°å½•ç­”æ¡ˆ
                userData.answers[userData.currentQuestion] = optionIndex;
                
                // æ£€æŸ¥ç­”æ¡ˆæ˜¯å¦æ­£ç¡®
                const currentQuiz = quizData[userData.currentQuestion];
                if (optionIndex === currentQuiz.answer) {
                    userData.score += 10;
                    document.getElementById('current-score').textContent = userData.score;
                }
                
                // ä¿å­˜æ•°æ®
                saveUserData();
                
                // é‡æ–°æ˜¾ç¤ºé—®é¢˜ï¼ˆæ˜¾ç¤ºç»“æœï¼‰
                showQuestion();
                
                // æ£€æŸ¥æ˜¯å¦è§£é”æ–°è§†é¢‘
                checkUnlockedVideos();
            }
            
            // ä¸Šä¸€é¢˜
            prevButton.addEventListener('click', function() {
                if (userData.currentQuestion > 0) {
                    userData.currentQuestion--;
                    showQuestion();
                }
            });
            
            // ä¸‹ä¸€é¢˜/å®Œæˆ
            nextButton.addEventListener('click', function() {
                if (userData.currentQuestion < quizData.length - 1) {
                    userData.currentQuestion++;
                    showQuestion();
                } else {
                    // å®Œæˆæ‰€æœ‰é—®é¢˜
                    alert(`æ­å–œæ‚¨å®Œæˆæ‰€æœ‰é—®é¢˜ï¼æ‚¨çš„æœ€ç»ˆå¾—åˆ†æ˜¯: ${userData.score}`);
                    switchTab('certificate');
                }
            });
            
            // æ˜¾ç¤ºç¬¬ä¸€ä¸ªé—®é¢˜
            showQuestion();
        }

        // æ¸²æŸ“æ’å
        function renderRanking() {
            const rankingList = document.getElementById('ranking-list');
            rankingList.innerHTML = '';
            
            // å°†å½“å‰ç”¨æˆ·æ·»åŠ åˆ°æ’åä¸­ï¼ˆå¦‚æœä¸åœ¨å‰5åï¼‰
            const allRanking = [...rankingData];
            const currentUserIndex = allRanking.findIndex(item => item.name === userData.name);
            
            if (currentUserIndex === -1) {
                allRanking.push({ name: userData.name, score: userData.score });
            } else {
                allRanking[currentUserIndex].score = userData.score;
            }
            
            // æŒ‰åˆ†æ•°æ’åº
            allRanking.sort((a, b) => b.score - a.score);
            
            // åªæ˜¾ç¤ºå‰6å
            const displayRanking = allRanking.slice(0, 6);
            
            displayRanking.forEach((user, index) => {
                const rankingItem = document.createElement('li');
                rankingItem.classList.add('ranking-item');
                if (user.name === userData.name) {
                    rankingItem.style.fontWeight = 'bold';
                    rankingItem.style.color = 'var(--primary-color)';
                }
                
                rankingItem.innerHTML = `
                    <span>${index + 1}. ${user.name}</span>
                    <span>${user.score}åˆ†</span>
                `;
                
                rankingList.appendChild(rankingItem);
            });
        }

        // æ¸²æŸ“è§†é¢‘
        function renderVideos() {
            const videoContainer = document.getElementById('video-container');
            videoContainer.innerHTML = '';
            
            videosData.forEach(video => {
                const videoCard = document.createElement('div');
                videoCard.classList.add('video-card');
                
                if (!video.unlocked && userData.score < video.pointsRequired) {
                    videoCard.classList.add('locked');
                }
                
                videoCard.innerHTML = `
                    <div class="video-thumbnail">ğŸ¬</div>
                    <div class="video-info">
                        <h4>${video.title}</h4>
                        <p>${video.unlocked || userData.score >= video.pointsRequired ? 'å·²è§£é”' : `éœ€è¦${video.pointsRequired}ç§¯åˆ†è§£é”`}</p>
                        ${!video.unlocked && userData.score >= video.pointsRequired ? 
                            `<button class="btn unlock-btn" data-video-id="${video.id}">è§£é”è§†é¢‘</button>` : 
                            ''}
                    </div>
                `;
                
                videoContainer.appendChild(videoCard);
            });
            
            // è§£é”æŒ‰é’®äº‹ä»¶
            document.querySelectorAll('.unlock-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const videoId = parseInt(this.getAttribute('data-video-id'));
                    unlockVideo(videoId);
                });
            });
        }

        // è§£é”è§†é¢‘
        function unlockVideo(videoId) {
            const video = videosData.find(v => v.id === videoId);
            if (video && !video.unlocked && userData.score >= video.pointsRequired) {
                video.unlocked = true;
                if (!userData.videosUnlocked.includes(videoId)) {
                    userData.videosUnlocked.push(videoId);
                }
                saveUserData();
                renderVideos();
                alert(`æ­å–œè§£é”è§†é¢‘: ${video.title}`);
            }
        }

        // æ£€æŸ¥è§£é”è§†é¢‘
        function checkUnlockedVideos() {
            let unlockedNew = false;
            
            videosData.forEach(video => {
                if (!video.unlocked && userData.score >= video.pointsRequired) {
                    video.unlocked = true;
                    if (!userData.videosUnlocked.includes(video.id)) {
                        userData.videosUnlocked.push(video.id);
                        unlockedNew = true;
                    }
                }
            });
            
            if (unlockedNew) {
                saveUserData();
                renderVideos();
            }
        }

        // æ›´æ–°è¯ä¹¦
        function updateCertificate() {
            document.getElementById('certificate-name').textContent = userData.name;
            document.getElementById('certificate-score').textContent = userData.score + "åˆ†";
            
            const now = new Date();
            document.getElementById('certificate-date').textContent = 
                `${now.getFullYear()}å¹´${now.getMonth() + 1}æœˆ${now.getDate()}æ—¥`;
        }

        // ä¿å­˜ç”¨æˆ·æ•°æ®åˆ°localStorage
        function saveUserData() {
            localStorage.setItem('antiJapaneseWarQuizUserData', JSON.stringify(userData));
            renderRanking();
        }

        // ä»localStorageåŠ è½½ç”¨æˆ·æ•°æ®
        function loadUserData() {
            const savedData = localStorage.getItem('antiJapaneseWarQuizUserData');
            if (savedData) {
                userData = JSON.parse(savedData);
            }
            
            document.getElementById('user-name-btn').textContent = userData.name;
            document.getElementById('current-score').textContent = userData.score;
            
            // æ›´æ–°è§†é¢‘è§£é”çŠ¶æ€
            videosData.forEach(video => {
                video.unlocked = userData.videosUnlocked.includes(video.id);
            });
        }
    </script>
</body>
</html>
